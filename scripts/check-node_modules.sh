#!/bin/bash

set -o errexit

function compare_timestamp() {
  DIR=${1:-$(pwd)}
  [ $DIR/node_modules/.npm-install.timestamp -nt $DIR/package.json ]
}

if [ -d "$1" ]; then
  compare_timestamp $1
else
  BASE_DIR=$(dirname $0)/..
  compare_timestamp $BASE_DIR
  compare_timestamp $BASE_DIR/client
  compare_timestamp $BASE_DIR/client/landing
fi
