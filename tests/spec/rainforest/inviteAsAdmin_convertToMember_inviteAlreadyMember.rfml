#! cf174fab-3e76-45c9-a614-5bfa938cabec
# title: inviteAsAdmin_convertToMember_inviteAlreadyMember
# start_uri: /
# tags: automated
#

# create_team_with_existing_account is embedded
- 1ae7b10f-f120-47de-bc67-eae94efbd491

# redirect: false
Click on 'Invite Your Team' section
Are you directed to 'Send Invites' section of 'My Team' tab? Do you see that 'Email' field of the first row is highlighted?

Enter "rainforestqa22@koding.com" in the 'Email' field of the first row, "{{ random.email }}" in the second row and "rainforest+{{ random.email }}" in the third row
Do you see that 4th row is autoadded to the list?

Click on 'SEND INVITES' button
Do you see 'You're adding an admin' pop-up? Do you see 'CANCEL' and 'THAT'S FINE' buttons?

Click on 'THAT'S FINE' button
Have you seen 'All invitations are sent.' message displayed?

Open a new incognito window by clicking on the 3 dots on the top corner of the browser and selecting 'New Incognito Window' and then go to '{{ sandbox.auth }}@{{ random.last_name }}{{ random.number }}.{{site.host}}' by pasting the url (using ctrl-v) in the address bar
Do you see 'Sign in to {{ random.last_name }}{{ random.number }}' text, 'Your Username or Email' and 'Your Password' fields and a 'SIGN IN' button?

Enter "rainforestqa22" both in the 'Your Username or Email' and 'Your Password' fields and click on 'SIGN IN' button
Are you successfully logged in? Do you see '{{ random.last_name }}{{ random.number }}' label at the top left corner? Do you see 'You are almost there, rainforestqa22!' title? Do you see 'Create a Stack for Your Team', 'Enter your Credentials', 'Build Your Stack', 'Invite Your Team' and 'Install KD' sections? Do you see 'CREATE', 'ENTER', 'BUILD', 'INVITE' and 'INSTALL' links next to them?

Click on 'Invite Your Team' section
Are you directed to 'Send Invites' section of 'My Team' tab? Do you see 'Admin' checkbox field at the end of the row? Do you see 'Team Billing' item under 'Dashboard' from left vertical menu?

Return to the first browser and scroll down to the bottom of the page
Do you see 'Admin' label next to 'rainforestqa22'? Do you see a yellow star icon next to rainforestqa22's avatar?

Scroll up to 'Send Invites' section again, enter "rainforestqa22@koding.com" in the first row and click on 'SEND INVITES' and then click on 'THAT'S FINE' button (be sure that admin checkbox is checked)
Do you see 'Invites Already Sent' title on a pop-up appeared? Do you see 'rainforestqa22@koding.com is already a member of your team.' text? Do you see 'OK' button?

Click on 'OK' button and scroll down to the bottom of the page again and click on the little down arrow next to 'Admin' label
Do you see 'Make owner', 'Make member' and 'Disable user' options? Do you see the same little down arrow next to 'Owner' label?

Select 'Make member'
Is 'Admin' label next to 'rainforestqa22' updated as 'Member'? Is the little down arrow next to 'Owner' label above is disappeared?

Switch to the incognito window
Do you see 'Your team role has been changed!' title on a pop-up appeared? Do you see '@rainforestqa99 made you a member, please refresh your browser for changes to take effect.' text? Do you see 'RELOAD PAGE' button?

Click on 'RELOAD PAGE' button
Is 'Team Billing' item removed from left vertical menu? Is 'Admin' checkbox removed from 'Send Invites' section? Are the little down arrows next to 'Owner', 'Invitation Sent' and 'Member' removed and no longer available (in Teammates section on the bottom of the page)? Do you see 'Member' label next to 'rainforestqa22'?