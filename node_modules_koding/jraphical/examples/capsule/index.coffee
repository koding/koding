Capsule = require '../../lib/capsule'

class Mount extends Capsule

  @setClient 'localhost:27017/test'

  baseMethod: ->
    console.log 'This method is defined by the base class', @constructor.name


class MountFTP extends Mount

  @set
    encapsulatedBy : Mount
    schema    :
      server  : String


class MountS3 extends Mount

  @set
    encapsulatedBy : Mount
    schema    :
      apiKey  : String

new MountFTP
  server: 'foo'
.save (err) ->
  throw err if err

new MountS3
  apiKey: '1234'
.save (err) ->
  throw err if err

Mount.all (err, mounts) ->
  for mount in mounts
    mount.baseMethod()
