{EventEmitter} = require './microemitter'

module.exports = class Channel extends EventEmitter

  constructor:(@name, @routingKeyPrefix, @isReadOnly=no)->

  publish:(rest...)->
    @emit 'publish', rest...  unless @isReadOnly

  close:-> @emit 'close'

  setAuthenticationInfo:(@authenticationInfo)->

  getAuthenticationInfo:-> @authenticationInfo

  isListeningTo:(event)->
    listeners = @_events?[event]
    listeners and (Object.keys listeners).length > 0

  bound: require 'koding-bound'