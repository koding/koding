#{EventEmitter} = require 'events'

module.exports = class ListenerTree# extends EventEmitter

  {assureAt, pushAt, getAt} = require 'jspath'

  constructor:->
    @tree = {}

  on:(routingKey, listener)->
    assureAt @tree, routingKey, []
    pushAt @tree, routingKey, listener
    @

  off:(routingKey, listener)->
    console.log 'ListenerTree#off is still unimplemented.'
    @

  emit:(routingKey, rest...)->
    listeners = getAt @tree, routingKey
    if listeners?.length
      for listener in listeners
        listener rest... 
    @