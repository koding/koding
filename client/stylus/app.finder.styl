@import "./client/Framework/themes/default/kdfn"
@import "./client/stylus/appfn"
@import "nib/gradients"
@import "nib/vendor"

active-color = rgb(246,162,32)
finderDimmedColor1 = #cccccc
finderDimmedColor2 = #c2c2c2
@css {
/*
FINDER stylesheet
app.finder.styl
*/
}

selectedNeighbor()
  border-top-color  #E6981E
  background        finderSelectedColor1

dimmed()
  border-color      #ccc transparent #c2c2c2 transparent
  color             #282828
  text-shadow       none
  // background        linear-gradient(top, #ccc 0%, #c2c2c2 100%)
  bg                color, #ccc

dimmedNeighbor()
  border-top-color  finderDimmedColor1
  background        finderDimmedColor2

#finder-holder
  height                auto
  overflow              visible
  .nfinder
    overflow            visible
    > div
      padding           10px 0
      borderBox()
    ul
      min-width         180px
      margin-left       0
      &.drop-target
        background      rgba(136, 183, 214, 0.13)

.nfinder
  .no-context-menu
    .kdlistitemview-finderitem
      .chevron
        hidden()
  .dim
    .kdlistitemview-finderitem.selected
      dimmed()
      &+.selected
        dimmedNeighbor()
      &+.jtreeview
        .kdlistitemview-finderitem
          &:first-child
            &.selected
              dimmedNeighbor()

    .jtreeview.last-item-selected + .kdlistitemview-finderitem.selected
      dimmedNeighbor()


.jtreeview.last-item-selected + .kdlistitemview-finderitem.selected
  selectedNeighbor()

.kdlistitemview-finderitem
  height              auto
  min-height          22px
  border              1px solid transparent
  border-width        1px 0
  font-size           11px
  color               #282828
  noTextSelection()

  &:first-child
    margin-top 0px

  .chevron
    abs()
    top               1px
    right             10px
    z-index           1
    float             none
    display           none
    size              16px,16px
    margin            0
    sprite()
    bg                position,-180px -360px

  &.selected
    border            1px solid #F6A220
    border-width      1px 0
    color             white
    text-shadow       0 -1px 0 rgba(0,0,0,0.22)
    // background        linear-gradient(top, finderSelectedColor2 0%, finderSelectedColor1 50%)
    bg                color, finderSelectedColor1
    .title
      color white
      text-shadow none
    &+.selected
      selectedNeighbor()
    &+.jtreeview
      .kdlistitemview-finderitem
        &:first-child
          &.selected
            selectedNeighbor()

  &.unsaved
    span.icon
      color           black!important
      font-size       14px
      text-indent     -2px
      line-height     10px
      vertical-align  top
      &:before
        content       "*"


  &.selected
    span.chevron
      display       block
      bg            position,-180px -380px

  &:hover
    span.chevron
      display       block

  &.expanded
    > div
      span.icon
        bg          position,-40px -120px

  &.being-inline-edited
    .chevron
      hidden()

  &.being-deleted
    border-color      rgb(168,70,25) transparent rgb(199,81,29) transparent
    background        linear-gradient(top, rgb(199,81,29) 100%,rgb(168,70,25) 44%)
    height            22px
    .kdview.delete-container
      padding         0 10px
    label
      color           white
    button.kdbutton
      margin          2px 15px 0 0
      padding         2px 4px 2px 4px
      width           auto
      font-weight     normal
      fr()

  &.items-hovering
    background        rgba(136, 183, 214, 0.25)
    text-shadow       none

  &.drop-target
    background        rgb(136, 183, 214)
    color             white
    text-shadow       none

  a.cancel
    abs()
    size            15px, 15px
    bg              position, -82px -222px
    right           5px
    top             3px
    sprite()
    &:focus
    &:active
      bg            position, -62px -242px

  > div
    line-height       22px
    height            100%
    width             auto
    .title
      cursor          default
      font-weight     normal
      width           auto
      margin-right    26px
      display         block
      overflow        hidden

    form
      height          22px

    input.kdinput.text
      margin          2px 5px 0 0
      height          17px
      line-height     1em
      border          none
      shadow          inset 0 1px 1px rgba(0,0,0,.44)
      rounded         2px
      fl()

    button.kdbutton
      margin          2px 10px 0 0
      padding         2px 4px 2px 4px
      width           auto
      font-weight     normal
      fr()

    .arrow
      sprite()
      fl()

    .kdloader
      margin        2px 3px
      fl()

    &.rename-container
      height        22px
      padding-right 25px
      input.hitenterview
        bg          image, none
        width       100%
        margin      2px 0
      a.cancel
        bg          position, -62px -242px



.drop-helper
  abs()
  border            2px solid finderSelectedColor1
  rounded           4px




#finder-panel
  abs()
  overflow          hidden
  size              208px,100%
  top               0
  left              160px
  text-shadow       1px 1px 1px #fcfcfc
  z-index           3
  background        #e2e2e2 url("../images/finder-back.gif") repeat left top
  leftTransition()
  &.expanded
    left            52px
    .kdscrollview
      overflow      auto
  .kdscrollview
    overflow        hidden

  .finder-resize-handle
    cursor            ew-resize
    abs()
    width             4px
    top               0!important
    right             0!important
    z-index           1
    overflow          visible
    span
      display         block
      abs()
      height          45px
      width           14px
      bg              position, -55px -173px
      top             0
      right           0
      sprite()
  .kdnotification.filetree.mini
    shadow              0 1px 3px rgba(0, 0, 0, 0.3)
    rounded             2px
    margin-top          -8px
    padding             0
    .kdnotification-title
      text-shadow       none
      font-size         10px
      line-height       10px
      padding           0 10px
    &.clickable
      cursor pointer

  // .finder-settings-border
  //   rel()
  //   margin                  0 auto
  //   width                   85%
  //   top                     1px
  //   border-top              1px solid rgba(255,255,255,.5)
  //   background-image        url("../images/finder-resizer-handle.gif")
  //   background-repeat       no-repeat
  //   background-position     center 7px
  //   height                  13px
  //   shadow(0 -1px 0 rgba(0,0,0,.05))
  //   bg(color,transparent)

  button.kdbutton.add-project
    font-weight     normal
    padding         5px 8px
    width           auto

  .separator
    border-top      1px solid #d9d9d9
    border-bottom   1px solid #f2f2f2
    margin          0 20px


#finder-header-holder
  size              auto,45px
  h2
    font-size       13px
    font-weight     bold
    color           rgba(78, 78, 78, .90)
    text-shadow     0 1px 0 white
    line-height     43px
    margin          0 10px
    size            auto,43px
    border-bottom   1px solid rgba(0,0,0,.05)
    shadow          0 1px 0 rgba(255,255,255,.5)
    min-width       208px
    span
      margin-left   5px


#finder-bottom-controls
  abs()
  bottom                    0
  margin                    0
  size                      100%, 180px
  vendor                    transition, height .2s linear .4s
  shadow                    0 0 8px rgba(0,0,0,0.15)
  background-color          #e2e2e2
  border-top                1px solid rgba(255,255,255,0.5)

  .horizontal-handler
    height                  5px
    width                   30px
    display                 block
    margin                  0 auto
    margin-top              12px
    sprite()
    bg                      position,-60px -160px

  &.go-down
    size                    100%, 27px

  &:hover
    height                  180px

  ul
    min-width               208px
    margin                  1px 10px 0 10px
    padding                 15px 0 5px 0
    li
      margin                0 10px 2px 10px
      padding               0
      cursor                pointer
      width                 auto
      span.icon
        margin-right        10px
        size                17px, 20px
        blockMid()
     a
      font-size             11px
      color                 #444
      text-decoration       none
      &:hover
        color               linkColor1
      span:not(.title)
        sprite()
      span.terminal
        bg(position,-100px -300px)
      span.resources
        bg(position,-120px -300px)
      span.cog
        bg(position,-138px -300px)
      span.shortcuts
        bg(position,-158px -300px)
      span.remotes
        bg(position,-220px -300px)
      span.databases
        bg(position,-198px -300px)

/*
**  Overriding Treeview STYLES
*/

// #finder > .kdview.kdtreeitemview:first-child .finder-item
//   margin-left   17px

// .kdtreeview-filetree
//   .kdtreeitemview
//     min-width     208px
//     height        auto
//     border        1px solid transparent
//     border-width  1px 0
//     font-size     11px
//     color         #282828
//     // min-width:    150px
//     noTextSelection()

//     &:first-child
//       margin-top 0px

//     .title
//       /*text-transform  uppercase*/
//       font-weight     bold
//       text-shadow     0 1px 0 white
//       color           #444
//       &:hover
//         color         #222

//     .chevron
//       abs()
//       top           1px
//       right         10px
//       z-index       1
//       float         none
//       display       none
//       size          16px,16px
//       margin        0
//       sprite()
//       bg            position,-180px -360px

//     &.selected
//       border        1px solid #F6A220
//       border-width  1px 0
//       color         white
//       text-shadow   0 -1px 0 rgba(0,0,0,0.22)
//       bg            color, finderSelectedColor1
//       // background    linear-gradient(top, finderSelectedColor2 0%, finderSelectedColor1 50%)
//       .title
//         color white
//         text-shadow none

//     &.unsaved
//       span.icon
//         color           black!important
//         font-size       14px
//         text-indent     -2px
//         line-height     10px
//         vertical-align  top
//         &:before
//           content       "*"
//         // bg              color,black
//         // opacity         .5
//       // border-left       5px solid #333
//       // borderBox()
//       // font-weight   bold
//       // color         #282828
//       // text-shadow   none


//     &.selected
//       span.chevron
//         display       block
//         bg            position,-180px -380px

//     &:hover
//       span.chevron
//         display       block

//     &.folder.expanded
//       .finder-item
//         span.icon
//           bg          position,-40px -120px

//     &.being-inline-edited
//       .chevron
//         hidden()

//     &.being-deleted
//       border-color      rgb(168,70,25) transparent rgb(199,81,29) transparent
//       background        linear-gradient(top, rgb(199,81,29) 100%,rgb(168,70,25) 44%)
//       height            22px
//       .kdview.delete-container
//         margin          0!important
//       span.icon
//         display         none
//       label
//         abs()
//         color           white
//         font-size       12px
//         top             2px
//         left            10px
//       button.kdbutton
//         margin          2px 10px 0 0
//         padding         2px 4px 2px 4px
//         width           auto
//         font-weight     normal
//         fr()
//       a.cancel
//         color           white
//         line-height     24px
//         margin-right    10px

//   .drop-helper
//     abs()
//     border            2px solid finderSelectedColor1
//     rounded           4px


.finder-item
  line-height       22px
  height            100%
  width             auto
  .title
    font-weight     normal
    width           auto
    margin-right    26px
    display         block
    overflow        hidden
  .title.unsaved
    font-style      italic

  form
    height          22px

  input.kdinput.text
    margin          2px 5px 0 0
    height          17px
    line-height     1em
    border          none
    shadow          inset 0 1px 1px rgba(0,0,0,.44)
    rounded         2px
    fl()

  button.kdbutton
    margin          2px 10px 0 0
    padding         2px 4px 2px 4px
    width           auto
    font-weight     normal
    fr()

  .icon
  .arrow
    sprite()
    fl()

  .kdloader
    margin        2px 3px
    fl()

  .icon
    margin        2px 3px
    size          16px,16px

  .section-title
    span.icon.domain
      bg          position,-40px -40px
    span.icon.ftp
      bg          position,-40px -60px

.file-container
  .file
  .mount
  .folder
  .broken
  .section
    font-size       11px
    span.icon
      margin        2px 3px
      size          16px,16px
      sprite()
      fl()
  .folder
  .mount
    span.icon
      bg            position, -40px -100px
    span.icon.application
      bg            position, -40px -320px
  .folder
    span.icon
      &.app
        bg          position, -40px -60px
  .broken
    span.icon
      bg            position, -60px -140px
  .file
    span.icon
      bg            position, -40px -140px
      &.code
        bg          position, -40px -180px
      &.image
        bg          position, -40px -200px
      &.archive
        bg          position, -40px -220px
      &.new-file
        bg          position, -40px -240px
      &.video
        bg          position, -40px -260px
      &.sound
        bg          position, -40px -280px
      &.text
        bg          position, -40px -300px



.finder-drag-container
  abs()
  width             208px

  .drag-helper
    height            22px
    margin-bottom     1px
    background        linear-gradient(top, rgba(208, 137, 27,.95) 0%, rgba(246, 162, 32,.95) 50%)
    color             white
    font-size         11px
    rounded           4px
    text-shadow       0 -1px 0 rgba(0,0,0,0.22)
    shadow            0,2px,5px,rgba(0,0,0,.2)
    borderBox()
    &.multiple-items
      padding-left    5px

    .title
      display         inline-block
      margin-right    0







