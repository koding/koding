@import "../../Framework/src/themes/default/kdfn"
@import "../../Core/styl/appfn"

@css {
/*
MAIN SIDEBAR stylesheet
resurrection.styl
*/
}

sidebarGray       = #A0A0A0
sidebarActive     = #F4F1ED
sidebarSubtitle   = #979087
sidebarSelectedBg = #262626

#main-sidebar

  size            258px 100%
  z-index         100
  bg              color #323232
  top             0
  left            0
  fix()

  > main > div:last-child
    margin-bottom     60px

  > .kdcustomscrollview
    width              100%
    kalc              height, 100% \- 107px
    styleScrollBars()

  &.static > .kdcustomscrollview
    kalc              height, 100% \- 47px

  .logo-wrapper
    size              100% 47px
    bg                color #262626
    padding           13px 0 0 23px
    borderBox()
    a
      margin          0
      display         block
      r-sprite        app logo-full
      cursor          default

  .more-items
    size              238px 20px
    line-height       20px
    color             #fff
    font-size         10px
    font-weight       700
    background        #E06F6F
    shadow            0 0 10px 10px #323232
    text-align        center

    &:after
      content         ' '
      border          5px solid transparent
      size            10px 10px
      borderBox()

    &.above
      rounded         0 0 3px 3px
      abs             0px 0 0 10px
      &:after
        border-bottom-color white
        abs           3px 0 0 8px

    &.below
      rounded         3px 3px 0 0
      abs             0 0 0px 10px
      &:after
        border-top-color white
        abs           8px 0 0 8px


#sidebar-toggle
  bg              color #262626
  size            18px 18px
  margin-top      -9px
  margin-left     -9px
  display         none
  z-index         11
  rounded         9px
  cursor          pointer
  top             50%
  fix()
  // hidden()
  &:after
    abs()
    top           4px
    left          5px
    display       block
    content       ' '
    r-sprite      app sidebar-toggle


#kdmaincontainer

  &.collapsed

    #main-panel-wrapper
      // kalc            width, 100% \- 63px
      // margin-left     63px
      // shadow         -8px 0 16px #323232
      margin-left 0
      width       100%

    #sidebar-toggle:after
      left               7px
      -moz-transform     scaleX(-1)
      -webkit-transform  scaleX(-1)
      transform          scaleX(-1)

    .activity-sidebar

      cite.count
        size            auto 16px
        line-height     16px
        padding         0 5px
        abs             0px 208px 0 0
        font-size       9px
        font-weight     400
        rounded         3px
        shadow          none
        z-index         1000

.activity-sidebar
  font-family         openSansFamily
  padding             1px 16px
  borderBox()

  .more-link
    font-size         12px
    color             #ababab
    margin            0 0 0 8px
    border-bottom     1px dotted #ababab
    noTextDeco()

  .workspace.has-sub-items
    cite
      display         none !important

  ul.expanded
    .expanded
      bg                color, sidebarSelectedBg
    ul.expanded
      rounded           0 0 4px 4px
    li.expanded
      rounded           4px 4px 0 0

  li.selected + ul.kdlistview-main-nav.expanded
    bg                color sidebarSelectedBg
    padding-bottom    8px
    rounded           0 0 4px 4px

  li + ul.kdlistview-main-nav.expanded
    padding-bottom    8px

  li.kdlistitemview-main-nav
    z-index           1
    vendor            transition, top .2s linear \,\
                                 left .2s linear
    font-size         14px
    line-height       18px
    rounded           4px
    ellipsis()
    borderBox()

    &:hover
      .ws-add-icon
      .ws-settings-icon
        opacity       1
        vendor        transition, opacity .1s .1s ease


    &.expanded.selected.has-sub-items
      bg              color sidebarSelectedBg
      rounded         4px 4px 0 0
      cite
        &:after
          border-color  sidebarGray transparent transparent transparent
          abs           12px 0 0 5px

    &.sub-title
      padding         8px 0 6px 22px
      color           sidebarSubtitle
      font-size       12px

    // &.app
    &.workspace
      color           sidebarActive
      font-size       12px
      line-height     26px
      padding         0 0 0 43px
      rounded         0

      figure
        display       block
        width         16px
        height        16px
        bg            color #222
        abs           5px 0 0 22px
        r-sprite      activity nav-workspace
      a
        padding           0
        display           block
        size              auto 26px
        opacity           1
        color             sidebarActive
        max-width         155px
        ellipsis()
        borderBox()
        noTextDeco()

    &.app
      figure
        r-sprite      activity nav-app-store

    .fake-icon
      width           30px
      height          20px
      left            13px
      top             14px
      text-align      center
      padding-top     4px
      padding-bottom  4px
      font-size       20px
      color           white
      border-radius   3px
      abs()
      hidden()

    &.selected
      bg              color rgba(21, 23, 26, 0.42)

    a
      padding           5px 8px 5px 42px
      display           block
      size              auto 26px
      opacity           1
      color             sidebarActive
      borderBox()
      noTextDeco()
      &.add-app
      &.add-vm
        padding         5px 8px
        opacity         .5
        &:hover
          opacity       1

      > figure
        display       block
        width         16px
        height        16px
        bg            color #222
        abs           6px 0 0 10px

      > div
        position      relative
        left          -10px


      &.social > figure
      &.activity > figure
        r-sprite      app new-nav-activity
      // &.editor > figure
      //   r-sprite      app nav-editor
      &.terminal > figure
        r-sprite      app new-nav-terminal
      &.ide > figure
        r-sprite      app new-nav-ide
      &.vm
        > figure
          r-sprite    app new-nav-vm
        > span
          r-sprite    app vm-settings-icon
          right       6px
          top         5px
          opacity     0
          vendor      transition, opacity .1s .1s ease
          abs()
        &:hover > span
          opacity     1
        &.terminated
        &.notinitialized
          opacity     .5
        &.running > figure
          r-sprite    app new-nav-vm-green
        > .progressbar-container
          size        100% 3px
          background  none
          border      none
          abs         0 0 0px 0px
          rounded     0 0 3px 3px
          .bar
            background  #4BA148
            border      none
            shadow      none

  .ws-add-icon
  .ws-settings-icon
    display           inline-block
    r-sprite          app circle-plus-14
    right             8px
    top               10px
    opacity           0
    vendor            transition, opacity .1s .1s ease
    pointer()
    abs()

  .ws-settings-icon
    r-sprite          app vm-settings-icon
    right             6px
    top               5px
    opacity           .6

  .add-workspace-view
    .cancel
      display         inline-block
      r-sprite        'app', 'circle-plus-14'
      vendor          transform, rotate(45deg)
      top             2px
      position        relative
      pointer()

    .kdinput
      border-radius   3px
      bg              image, none
      size            152px, 22px
      margin-right    5px
      font-size       12px
      padding         5px

  > section
    size              auto auto
    overflow          visible
    margin            0 0 15px 0

    &:hover h3.sidebar-title a
      opacity       1
      color         sidebarGray

    .lazy-loader
      margin          0
      top             -28px
      right           36px
      abs()

    .kdlistview
      overflow        visible

      .nothing
        background    #3B3B3B
        width         auto
        font-size     14px
        margin        0 6px
        padding       16px 18px
        rounded       3px
        line-height   19px
        text-align    center
        font-weight   400
        color         #787878
        margin-bottom 16px
        borderBox()

        a
          color             #929292
          text-decoration   underline

  a.public-feed-link.selected
    color               #fff

  .kdlistitemview-sidebar-item
    size              auto 28px
    padding           5px 8px
    rounded           4px
    font-size         12px
    overflow          visible
    position          relative
    display           block
    color             sidebarGray
    overflow          hidden
    vendor            transition, margin-top .2s ease-out\,\
                                  transform .2s ease-out
    borderBox()
    &:hover
      bg              color rgba(0,0,0,.01)
      pointer()
      .purpose
      .profile
      .ttag
        text-decoration underline

    &.activity
      font-size       14px
      padding-left    30px
      margin-top      13px
      line-height     18px
      span.icon
        display       block
        width         16px
        height        16px
        bg            color #222
        abs           7px 0 0 7px
        r-sprite      app new-nav-activity

    &.out
      margin-top      -28px
      vendor          transform, translateX(-300px)



    cite.count
      size            auto 20px
      line-height     20px
      color           #fff
      abs             4px 7px 0 0
      padding         0 10px
      font-size       10px
      font-weight     700
      background      #E06F6F
      rounded         3px
      shadow          0 0 10px 10px #323232
      vendor          transition, all .354s .177s ease
      // vendor          transition, top .354s .177s ease\,
      //                             right .354s .177s ease\,
      //                             width .354s .177s ease\,
      //                             height .354s .177s ease\,
      //                             padding .354s .177s ease\,
      //                             box-shadow .354s .177s ease\,
      //                             font-size .354s .177s ease

      fr()

    .ttag
      display        block
      font-weight    500
      color          sidebarGray
      line-height    18px
      font-size      14px

    .profile
      ellipsis()
      color          sidebarGray

    .topic-follow-btn
      abs            5px 7px 0 0

      &.following
        right        6px
        hidden()

  .kdlistitemview-sidebar-item.selected
    background          #15171A

    .ttag
      color             sidebarActive

    cite.count
      shadow            0 0 10px 10px #15171A

    .topic-follow-btn
      border-color      #e9e9e9
      border            1px solid #b1b1b1
      right             6px

  .messages

    .nothing
      hidden()

    .kdlistitemview-sidebar-item
      height        34px
      min-height    0
      margin        0
      borderBox()

      cite.count
        abs         7px 7px 0 0

      > .user-numbers
        padding     0 0 0 36px
        margin      -1px 0 0
        width       auto
        font-weight 400
        font-size   12px
        color       #919297
        font-weight 600
        overflow    hidden
        text-overflow ellipsis
        display     block
        line-height 18px
        white-space nowrap
        borderBox()

        span
          font-weight inherit
          color       inherit

      .sidebar-message-icon
      .avatarview
        top           0
        left          0
        abs()

      .stacked

        margin-left   -1px
        margin-top    2px
        size          auto auto
        display       block

        .avatarview

          img
            border      1px solid rgb(50, 50, 50)
            borderBox()

          &:nth-of-type(1)
            top       0
            left      6px
            z-index   1

          &:nth-of-type(2)
            top       3px
            left      9px
            z-index   2

          &:nth-of-type(3)
            top       6px
            left      12px
            z-index   3

      &.unread
        > .profile
          color       #F9F7F3

        > .user-numbers
          color       #C9C9CC

      &.selected

        .sidebar-message-text
          > .purpose
          > .user-numbers
          > .profile
          > .profile > .profile
            color       sidebarActive


      .sidebar-message-text
        > .purpose
        > .profile
          display     block
          float       none
          padding     0 0 0 36px
          line-height 18px
          width       auto
          color       sidebarGray
          font-weight 600
          borderBox()
          ellipsis()
          margin-top  3px


      > .purpose
      > .profile
        color           sidebarActive

      .avatarview
        size            24px 24px
        top             5px
        left            8px


  .sidebar-join
    abs                   50% 0 0 0px
    vendor                transform, translateY(-50%)
    text-align            center
    font-size             14px
    line-height           19px
    color                 #cecece
    font-weight           400
    padding-right         16px
    padding-left          16px
    width                 100%
    borderBox()

    .kdbutton.solid.medium.green
      margin              24px 0 18px
      rounded             3px

    a.login-link
      color               #fff

  .sidebar-bottom-links
    text-align            center
    abs                   0 0 26px 0px
    font-size             14px
    font-weight           400
    width                 100%

    a
      color               #777777
      noTextDeco()

      &~a
        margin-left       12px


  a.kdlistitemview-sidebar-item

    noTextDeco()

    &.public-feed-link
      margin-top      13px
      padding         0 8px
      height          28px
      line-height     28px

.account-area
  bottom            0
  left              0
  size              258px 59px
  fix()

  // TODO just a temporary update for development. remove this later
  .groups
    right           22px !important

  > div
    display         inline-block
    width           auto
    vertical-align  top

  .acc-dropdown-icon
    size            auto 59px
    display         block
    abs             0px 0px 0 0

    .icon
      display         block
      padding-bottom  1px
      r-sprite        app 'account-arrow'
      margin          26px 23px 26px 11px

    &.main-nav
      right           44px
      .icon
        margin        26px 11px 26px 23px

  .avatar-area
    bg                 color, #1A1A1A
    padding            10px 12px
    size               100% 100%
    borderBox()
    rel()

    .avatarview
      margin-right    14px
      fl()

    a.profile
      font-size     14px
      line-height   18px
      font-weight   400
      margin        11px 0
      white-space   nowrap
      width         100px
      display       block
      color         white
      overflow      hidden
      text-overflow ellipsis
      noTextDeco()

    h3
      margin        0
      color         #828a93
      font-size     12px
      font-weight   300
      margin-top    2px

  .header-sign-in
    font-size         16px
    color             #e9e9e9
    line-height       55px
    margin-right       8px
    noTextDeco()

    &:last-of-type
      margin-right    18px


h3.sidebar-title
  position        relative
  font-weight     600
  size            auto 1em
  line-height     1em
  font-size       12px
  color           #7F7F80
  text-transform  uppercase
  word-spacing    .2em
  padding         19px 6px 12px
  pointer()

  a
    font-size       10px
    font-weight     600
    color           #7F7F80
    margin          0 5px 0 0
    opacity         0
    vendor          transition, opacity .1s .1s ease
    fr()

    &.add-icon
    &.buy-vm
      margin        -2px 0 0 0
      r-sprite      app , 'circle-plus-16'


.messages.empty h3.sidebar-title a.add-icon
  opacity           1



//Coming soon modal
.coming-soon-modal
  text-align        center

  .modal-arrow
    position        relative
    top             41px
    left            -21px

  .kdmodal-content
    h4
      color         #404040
      font-size     18px
      font-weight   200
      line-height   24px
      padding       13px 0 0

      &:before
        content     ""
        display     block
        r-sprite    dashboard, 'coming-soon'
        margin      0 auto 14px

    p
      padding       24px 28px 28px
      color         #5e5e5e
      font-size     14px
      line-height   19px
      font-weight   400

      strong
        font-weight 600
        color       #3e3e3e



// buy-machine-modal
.buy-machine-modal
  &.loading
    .kdloader
      margin          105px 0 0 90px

  .kdbutton
    padding           0 20px !important
    rounded           4px !important
    bg                color, #4EA04C !important
    &:focus
      vendor          box-shadow, none !important
    &.create-machine
      margin          20px 0 0 136px !important

  .modal-arrow
    position          relative
    top               41px
    left              -21px

  .add-vm-box
    size               220px, 227px
    padding            25px 35px 0
    color              #50595a
    rounded            2px
    borderBox()
    fl()

    &~.add-vm-box
      margin-left      18px

    &.passive
      opacity          .3

    &.selected
      shadow           inset 0 0 0 3px rgba(17, 175, 94, .4)


    h3
      line-height      24px
      display          block
      border-bottom    1px solid #d7dcdf
      font-size        16px
      font-weight      500
      padding          6px 0 12px

      cite
        display        inline-block
        size           24px, 24px
        line-height    24px
        text-align     center
        color          #fff
        background     #646c6d
        rounded        50%
        font-size      12px
        font-weight    200
        margin         0 0 0 6px

    ul
      margin           20px 0 0
      font-weight      200
      line-height      34px
      font-size        14px

      strong
        font-weight    500
        font-size      16px

  h5.coming-soon-title
    display            block
    abs                0px 0px 0 0
    size               476px, 100%
    text-align         center
    line-height        227px
    font-size          22px
    color              rgba(80, 89, 90, 0.5)
    font-weight        400