#! 62424fb0-06db-45a7-b7b1-a86a9e88ccef
# title: TEAM CREATION with existing account, VM Sharing
# start_uri: /
# tags: team creation, shared vms
# browsers: osx_chrome
#
 
Enter 'koding' in the 'User Name' and '1q2w3e4r' in the 'Password' fields and click on 'Log in'
Do you see 'Sign in to your team' form in the center of the page with a green 'Continue' button? Do you see 'Click here to get started.' text below that form?

Click on 'Click here' link
Do you see 'Create a team' form and a green 'Sign up' button?

Enter 'rainforestqa99@koding.com' in the email and '{{ random.last_name }}{{ random.number }}' in the team name fields and click on 'Sign Up' button
Do you see 'Your team URL' form with URL field prefilled?

Click on 'Next' button
Do you see 'Sign in' form with only password input field? Do you see 'Hey rainforestqa99' text?

Enter 'rainforestqa99' in the password field and click on 'Done!' button, then enter 'koding' in the 'User Name' and '1q2w3e4r' in the 'Password' fields and click on 'Log in' (on the Authentication Required form)
Do you see 'Stack Catalog' modal with 'Welcome', 'My Stacks', 'My Stack Templates', 'Team Stack Templates' and 'Koding Utilities' tabs? Do you see 'Create a Stack for Your Team', 'Invite your team' and 'Install KD' sections?

Click on 'Create a Stack for Your Team' section and then click on 'Get Started!' button
Do you see 'What provider do you want to use' title? Do you see 'amazon web services' and other 'coming soon labeled' providers? Do you see 'Skip setup guide' link in the bottom?

Click on 'Skip setup guide' link on the bottom and then click on 'Credentials' text having a red (!) next to it
Do you see 'rainforestqa99's AWS keys' text with 'aws' label under it? Do you see 'Use This & Continue' button next to it?

Click on 'Use This & Continue' button and wait for a second for process to be completed and then click on 'Save & Test' button and wait for a second for process to be completed
Do you see 'Your stack script has been successfully saved..' overlay? Do you see 'Close' buttton?

Click on 'Close' button and click on 'OK' button on top right of the page
Do you see 'Team Stack Templates' title? Do you see 'Create New Stack' button on the right? Do you see 'Default stack template' and 'default', 'in use' and 'group' labels next to it?

Click on (X) on top right corner of this modal and then
Do you see 'Readme text for this stack template' and 'example is not build yet.' texts in the center and 'Build Stack' button under it?

Click on 'Build Stack' button
Do you see 'example is building now.' text? Do you see green progress bar in the center and in the left sidebar below the 'example' label?

Click on the default profile image next to '{{ random.last_name }}{{ random.number }}' label on top left and then click on 'Team Settings'
Do you see 'Team Settings' modal opened with 'General', 'Members', 'Invitations', 'API Access' and 'Team Logs' sections? Do you see '{{ random.last_name }}{{ random.number }}' in 'Name' and 'URL' fields?

Click on 'Invitations' from left vertical menu and then enter 'rainforestqa25@koding.com' in the 'Email' field of the first row and uncheck 'Admin' checkbox and click on 'Invite Members' button (see screencast: http://recordit.co/sq9k0iQ8H1 for sending invitation)
Have you seen 'Invitation is sent to rainforestqa25@koding.com' message?

Open an incognito window (by clicking on the 3lined button from top right corner of the browser and selecting 'New Incognito Window' - screenshot here:http://take.ms/2hxOf) and go to '{{ random.last_name }}{{ random.number }}.sandbox.koding.com'
Do you see 'Authentication Required' form?

Enter 'koding' in the 'User Name' and '1q2w3e4r' in the 'Password' fields and click on 'Log in'
Do you see 'Sign in to {{ random.last_name }}{{ random.number }}' login form? Do you see green 'Sign in' button?

Enter 'rainforestqa24@koding.com' in username/email and 'rainforestqa24' in the password fields and click on 'Sign in' button
Have you seen 'You're not allowed to access this team' warning?

Enter 'rainforestqa25' in both username/email and password fields and click on 'Sign in' button
Do you see {{ random.last_name }}{{ random.number }} label at the top left corner? Do you see 'Default Stack Template' under 'Stacks' title in the left sidebar? Do you see green 'Build Stack' button in the center of the page?

Return to the first browser and close 'Team Settings' modal by clicking (x) icon on top right corner
Do you see 'cloud-init' file on top and 'Terminal' tab on the bottom pane? Do you see 'Default Stack Template' under 'Stacks' title in the left sidebar? Do you see a green square next to 'example'?

Click on the button appearing when you mouse over 'example' label on the top left sidebar
Do you see 'VM Settings' Modal? Do you see 'General', 'Specs', 'Disk Usage' and other menu options?

Click on 'VM Sharing' from left vertical menu and click on 'Add Someone' button
Do you see a text field with 'Type a username...' label in it?

Enter 'rainforestqa25' in the text field or select the result of auto-complete directly 
Do you see 'rainforestqa25' with a default profile image under the text field?

Return to the incognito window and click on 'Reject' button, then return again to the first browser
Has rainforestqa25 been removed from the list? Do you see 'This VM has not yet been shared with anyone.' text?

Enter 'rainforestqa25' in the text field again or select the result of auto-complete directly, then return to the incognito window and click on 'Accept' button 
Do you see '/home/rainforestqa99' label on top of file list? Do you see 'Terminal' tab and 'rainforestqa99@rainforestqa99:~$' in that tab?

Save image from here: {{ random.image }} to your desktop, return to the incognito window and drag and drop image to the Filetree under '/home/rainforestqa99' label (like in the screencast: http://recordit.co/KRArrgJ8Gs)
Is it added to the end of Filetree?

Click on the (x) next to 'Untitled.txt' and click on (+) icon
Do you see 'New File', 'New Terminal', 'New Drawing Board', 'Split Vertically', 'Split Horizontally' and 'Enter Fullscreen' options?

Click on 'New File'
Is 'Untitled.txt' added to the pane?

Type '{{ random.full_name }}' in it, click on the little down arrow next to 'Untitled.txt' and select 'Save As...'
Do you see 'Filename' title and a text field with 'Untitled.txt' in it? Do you see 'Select a folder:' title? Do you see 'Cancel' and 'Save' buttons?

Type '{{ random.first_name }}' instead of 'Untitled' and click on 'Save' button
Is '{{ random.first_name }}.txt' added to the pane instead of 'Untitled.txt'? Is it also added to the end of Filetree?

Click on (+) next to 'Terminal' tab on the bottom pane and select 'New Terminal' and then 'New Session'
Is a new 'Terminal' tab opened? Do you see 'rainforestqa99@rainforestqa99:~$' on it?

Reload the page 
Do you see '{{ random.first_name }}.txt' on top and two Terminal tabs on the bottom?

Return to the first browser, close 'VM Settings' modal by clicking (x) icon on top right corner and reload the page
Do you see 'Untitled.txt' and 'cloud-init' on top and a Terminal tab on the bottom? Do you see the newly added image (by drag&drop) and '{{ random.first_name }}.txt' in the Filetree?

Click on the button appearing when you mouse over 'example' label on the top left sidebar and toggle 'On/Off' button
Do you see 'example is stopping now.' text with a red progress bar below it?

Return to the incognito window and reload the page
Do you see the same stopping progress bar or (in case that the progress is completed ->) 'example is turned off.' text?

After seeing 'example is turned off.' text, click on the button appearing when you mouse over 'example (@rainforestqa99)' label under 'Shared VMs' and click on 'Leave Shared VM'
Are 'example (@rainforestqa99)' label and 'SHARED VMS' title removed from left sidebar? Do you see a green 'Build Stack' or 'Turn it on' button?
