# [Koding Monitoring](https://console.aws.amazon.com/cloudwatch/home?region=us-east-1#alarm:alarmFilter=ANY)


Our monitoring and alerting system is handled by [Amazon CloudWatch](https://console.aws.amazon.com/cloudwatch/home?region=us-east-1)

All of our <env_name>* has the same type of monitoring and notification system.

When a check turns to alarm state, AWS will send a very detailed notification email to sysops+<env_name>@koding.com.



* <env_name> is in [sandbox, latest, prod]

Load Balancer:

```
// The number of errors encountered by the load balancer while attempting to
// connect to application.
//
// Threshold: BackendConnectionErrors >= 5 for 5 minutes
<env_name>.koding.com_ELB_BackendConnectionErrors_Avg_5_For_1x5Min
```

```
// The count of the number of healthy instances in each Availability Zone. Hosts
// are declared healthy if they meet the threshold for the number of consecutive
// health checks that are successful. Hosts that have failed more health checks
// than the value of the unhealthy threshold are considered unhealthy. If cross-
// zone is enabled, the count of the number of healthy instances is calculated for
// all Availability Zones.
// Threshold: HealthyHostCount <= 0 for 1 minute
<env_name>.koding.com_ELB_Healty_Hosts_Avg_0_For_1x1Min
```

```
// The count of the number of HTTP response codes generated by back-end instances.
// This metric does not include any response codes generated by the load balancer.
//
// Threshold: HTTPCode_ELB_5XX >= 10 for 5 minutes
// Threshold: HTTPCode_ELB_4XX >= 10 for 5 minutes
<env_name>.koding.com_ELB_HTTPCode_Backend_5XX_Avg_10_For_1x5Min
<env_name>.koding.com_ELB_HTTPCode_Backend_4XX_Avg_10_For_1x5Min
```

```
// Avarage latency while connecting to the app
//
// Threshold: Latency >= 0.01 for 15 minutes
<env_name>.koding.com_ELB_Latency_Avg_0.01S_For_1x15Min
```

```
// The number of rejected requests due to a full surge queue.
//
// Threshold: SpilloverCount >= 20 for 5 minutes
<env_name>.koding.com_ELB_SpilloverCount_Avg_20_For_1x5Min
```

```
// All requests that are proxied by ELB
//
// Threshold: RequestCount >= 10,000 for 15 minute
<env_name>.koding.com_ELB_SumRequests_Avg_10000_For_1x15Min
```

```
// Surge Queue Length: the number of requests queued by the load balancer,
// awaiting a back-end instance to accept connections and process the request.
// Threshold: SurgeQueueLength >= 20 for 5 minutes
<env_name>.koding.com_ELB_SurgeQueue_Avg_20_For_1x5Min
```

```
// The count of the number of unhealthy instances in each Availability Zone. Hosts
// that have failed more health checks than the value of the unhealthy threshold
// are considered unhealthy. If cross-zone is enabled, the count of the number of
// unhealthy instances is calculated for all Availability Zones.
//
// Instances may become unhealthy due to connectivity issues, health checks
// returning non-200 responses (in the case of HTTP or HTTPS health checks), or
// timeouts when performing the health check.
//
// Threshold: UnHealthyHostCount >= 1 for 15 minutes
<env_name>.koding.com_ELB_Unhealty_Hosts_Avg_1_For_1x15Min
```

Billing


```
// Send notification if the monthly estimated charge gets over 100$
//
// Threshold: EstimatedCharges >= 100 for 6 hours
koding.com_Billing_DataTransfer_Estimated_Greater_Than_100
```

```
// Send notification if the monthly estimated charge gets over 100$
//
// Threshold: EstimatedCharges >= 100 for 6 hours
koding.com_Billing_QueueService_Estimated_Greater_Than_100
```

```
// Send notification if the monthly estimated charge gets over 5K$
//
// Threshold: EstimatedCharges >= 5K for 6 hours
koding.com_Billing_EC2_Estimated_Greater_Than_5000
```

```
// Send notification if the monthly estimated charge gets over 100$
//
// Threshold: EstimatedCharges >= 150 for 6 hours
koding.com_Billing_ElastiCache_Estimated_Greater_Than_150
```

```
// Send notification if the monthly estimated charge gets over 700$
//
// Threshold: EstimatedCharges >= 700 for 6 hours
koding.com_Billing_RDS_Estimated_Greater_Than_700
```

```
// Send notification if the monthly estimated charge gets over 100$
//
// Threshold: EstimatedCharges >= 100 for 6 hours
koding.com_Billing_Route53_Estimated_Greater_Than_100
```

```
// Send notification if the monthly estimated charge gets over 100$
//
// Threshold: EstimatedCharges >= 100 for 6 hours
koding.com_Billing_S3_Estimated_Greater_Than_100
```

```
// Send notification if the monthly estimated charge gets over 100$
//
// Threshold: EstimatedCharges >= 100 for 6 hours
koding.com_Billing_SNS_Estimated_Greater_Than_100
```

```
// Send notification if the monthly estimated charge gets over 100$
//
// Threshold: EstimatedCharges >= 100 for 6 hours
koding.com_Billing_VPC_Estimated_Greater_Than_100
```

RDS


```
// Threshold: DatabaseConnections >= 75 for 15 minutes
prod.koding.com_RDS_prod0_Connection_Avg_75_For_1x15Min
```

```
// Threshold: CPUUtilization >= 75 for 15 minutes
prod.koding.com_RDS_prod0_CPU_Utilization_Avg_75_For_1x15Min
```

```
// Threshold: FreeableMemory <= 5,242,880,000 for 5 minutes
prod.koding.com_RDS_prod0_FreeableMemory_Avg_5G_For_1x5Min
```

```
// Threshold: FreeStorageSpace <= 26,214,400,000 for 5 minutes
prod.koding.com_RDS_prod0_FreeStorage_Avg_25G_For_1x5Min
```

```
// the number of IO requests in the queue waiting to be serviced. These are IO
// requests that have been submitted by the application but have not been sent to
// the device because the device is busy servicing other IO requests. Time spent
// waiting in the queue is a component of Latency and Service Time (not available
// as a metric). This metric is reported as the average queue depth for a given
// time interval.  Amazon RDS reports queue depth in one minute intervals. Typical
// values for queue depth range from zero to several hundred.
// Threshold: DiskQueueDepth >= 10 for 5 minutes
prod.koding.com_RDS_prod0_QueueDepth_Avg_10_For_1x5Min
```

```
// The number of IO operations completed per second. This metric is reported as
// the average IOPS for a given time interval. Amazon RDS reports read and write
// IOPS separately on one minute intervals. Total IOPS is the sum of the read and
// write IOPS. Typical values for IOPS range from zero to tens of thousands per
// second.
//
// Threshold: ReadIOPS >= 50 for 15 minutes
prod.koding.com_RDS_prod0_ReadIOPS_Avg_50_For_1x15Min
```

```
// Threshold: ReadLatency >= 0.01 for 15 minutes
prod.koding.com_RDS_prod0_ReadLatency_Avg_0.01S_For_1x15Min
```


```
// In 0.1 MB
// Threshold: ReadThroughput >= 104,857.6 for 5 minutes
prod.koding.com_RDS_prod0_ReadThroughput_Avg_0.1_For_1x5Min
```


```
// Threshold: SwapUsage >= 26,214,400 for 5 minutes
prod.koding.com_RDS_prod0_SwapUsage_Avg_25_For_1x5Min
```


```
// The number of IO operations completed per second. This metric is reported as
// the average IOPS for a given time interval. Amazon RDS reports read and write
// IOPS separately on one minute intervals. Total IOPS is the sum of the read and
// write IOPS. Typical values for IOPS range from zero to tens of thousands per
// second.
// Threshold: WriteIOPS >= 50 for 15 minutes
prod.koding.com_RDS_prod0_WriteIOPS_Avg_50_For_1x15Min
```


```
// Threshold: WriteLatency >= 0.05 for 15 minutes
prod.koding.com_RDS_prod0_WriteLatency_Avg_0.05S_For_1x15Min
```


```
// Threshold: WriteThroughput >= 104,857.6 for 5 minutes
prod.koding.com_RDS_prod0_WriteThroughput_Avg_0.1_For_1x5Min
```




ElastiCache


```
// Threshold:
prod.koding.com_ElastiCache_prod0_CPUUtilization_Avg_75_For_1x15Min
```


```
// Threshold:
prod.koding.com_ElastiCache_prod0_FreeableMemory_Avg_1G_For_1x15Min
```

```
// Threshold:
prod.koding.com_ElastiCache_prod0_CurrConnections_Avg_1000_For_1x15Min
```


RabbitMQ

```
Send an alert when RMQ have more than  30K messages for the last 5mins

prod.koding.com_RabbitMQ_MessageCount_Avg_30K_For_1x5Min
```

```
Send an alert when RMQ have more than 1K unacknowledged messages for the last 5mins

prod.koding.com_RabbitMQ_UnacknowledgedMessageCount_Avg_1K_For_1x5Min
```

```
Send an alert when RMQ have more than 1K sockets opened for the last 5mins

prod.koding.com_RabbitMQ_SocketCount_Avg_1K_For_1x5Min
```

```
Send an alert when RMQ have more than 1K FD opened for the last 5mins

prod.koding.com_RabbitMQ_FileDescriptorCount_Avg_1K_For_1x5Min
```
